@using Newtonsoft.Json;
@model QuanLyKhoGiaoHangNhanh.Models.HomeView
@{
    if (Convert.ToInt32(Session["IdUser"]) == 1 || Convert.ToInt32(Session["IdUser"]) == 3)
    {
        var points = Model.khuVucs.Select(item => item.ToaDo.ToString()).ToList();
        var pointsJson = Newtonsoft.Json.JsonConvert.SerializeObject(points);
    }
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="~/Contents/css/Home.css" />
</head>
<body style="background-color: #FFF5E1; color: #FF4500;">
    <div class="container">
        <div class="card">
            <div class="card-header">
                <span>Số liệu</span>
            </div>
            <div class="card-body" style="text-align:left">
                @if (Convert.ToInt32(Session["IdUser"]) == 1)
                {
                    <div class="row" style="color:aliceblue">
                        <div class="col-2 border-right" style="background-color:blue">
                            <div class="m-2">
                                <h3>@((Model.donHangLuuKhos != null ? Model.donHangLuuKhos.Count() : 0))</h3>
                                <h5>Đơn hàng tồn</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:burlywood">
                            <div class="m-2">
                                <h3>@((Model.khuVucs != null ? Model.khuVucs.Count() : 0))</h3>
                                <h5>Khu vực</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:fuchsia">
                            <div class="m-2">
                                <h3>@((Model.taiKhoanHoatDongs != null ? Model.taiKhoanHoatDongs.Count() : 0))</h3>
                                <h5>Tài khoản hoạt động</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:brown">
                            <div class="m-2">
                                <h3>@((Model.taiKhoanKhongHoatDongs != null ? Model.taiKhoanKhongHoatDongs.Count() : 0))</h3>
                                <h5>Tài khoản không hoạt động</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:blueviolet">
                            <div class="m-2">
                                <h3>@((Model.nhanViens != null ? Model.nhanViens.Count() : 0))</h3>
                                <h5>Nhân viên</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:crimson">
                            <div class="m-2">
                                <h3>@((Model.xes != null ? Model.xes.Count() : 0))</h3>
                                <h5>Xe</h5>
                            </div>
                        </div>
                    </div>

                }
                @if (Convert.ToInt32(Session["IdUser"]) == 2)
                {
                    <div class="row" style="color:aliceblue">
                        <div class="col-2 border-right" style="background-color:blue">
                            <div class="m-2">
                                <h3>@((Model.nhanViens != null ? Model.nhanViens.Count() : 0))</h3>
                                <h5>Nhân viên</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:burlywood">
                            <div class="m-2">
                                <h3>@((Model.loiNhanViens != null ? Model.loiNhanViens.Count() : 0))</h3>
                                <h5>Lỗi tồn</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:fuchsia">
                            <div class="m-2">
                                <h3>@((Model.vatTuHuHongs != null ? Model.vatTuHuHongs.Count() : 0))</h3>
                                <h5>Vật tư hư</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:brown">
                            <div class="m-2">
                                <h3>@((Model.vatTuDangSuaChuas != null ? Model.vatTuDangSuaChuas.Count() : 0))</h3>
                                <h5>Vật tư đang sửa</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:blueviolet">
                            <div class="m-2">
                                <h3>@((Model.banGiaoVatTus != null ? Model.banGiaoVatTus.Count() : 0))</h3>
                                <h5>Vật tư đã bàn giao</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:crimson">
                            <div class="m-2">
                                <h3>@((Model.lichSuBanGiaoVatTuThuHois != null ? Model.lichSuBanGiaoVatTuThuHois.Count() : 0))</h3>
                                <h5>Vật tư đã thu hồi</h5>
                            </div>
                        </div>
                    </div>

                }
                @if (Convert.ToInt32(Session["IdUser"]) == 3)
                {
                    <div class="row" style="color:aliceblue">
                        <div class="col-2 border-right" style="background-color:blue">
                            <div class="m-2">
                                <h3>@((Model.donHangLuuKhos != null ? Model.donHangLuuKhos.Count() : 0))</h3>
                                <h5>Đơn hàng tồn</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:burlywood">
                            <div class="m-2">
                                <h3>@((Model.donHangDangGiaos != null ? Model.donHangDangGiaos.Count() : 0))</h3>
                                <h5>Đơn hàng đang giao</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:fuchsia">
                            <div class="m-2">
                                <h3>@((Model.donHangDaGiaos != null ? Model.donHangDaGiaos.Count() : 0))</h3>
                                <h5>Đơn hàng đã giao</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:brown">
                            <div class="m-2">
                                <h3>@((Model.donHangSuCos != null ? Model.donHangSuCos.Count() : 0))</h3>
                                <h5>Đơn hàng sự cố</h5>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:blueviolet">
                            <div class="m-2">
                                <h3>@((Model.xes != null ? Model.xes.Count() : 0))</h3>
                                <h4>Xe</h4>
                            </div>
                        </div>
                        <div class="col-2 border-right" style="background-color:crimson">
                            <div class="m-2">
                                <h3>@((Model.khuVucs != null ? Model.khuVucs.Count() : 0))</h3>
                                <h5>Khu vực</h5>
                            </div>
                        </div>
                    </div>

                }


            </div>
        </div>
        @if (Convert.ToInt32(Session["IdUser"]) == 1)
        {
            <div class="row">
                <section class="col-md-4" id="mapSection">
                    <div class="card">
                        <div class="card-header">
                            <span>Khu vực</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="toggleMap">Thu gọn</button>
                        </div>
                        <div class="card-body" id="mapContainer">
                            <div id="map" style="height: 400px; width: 100%;"></div>
                        </div>
                    </div>
                </section>
                <section class="col-md-4" id="chartSection1">
                    <div class="card">
                        <div class="card-header">
                            <span>Biểu đồ phân loại đơn hàng</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart">Thu gọn</button>
                        </div>
                        <div class="card-body" style="color:black">
                            <div id="datasets-example-1">
                                <table class="charts-css column show-labels data-spacing-5 datasets-spacing-1">
                                    <tbody>
                                        <tr>
                                            <td style="--size: calc( @(Model.donHangDienTu != null ? Model.donHangDienTu.Count() : 0) / 50 ); --color: rgba(240 50 50 / 75%);"><span class="data"> @(Model.donHangDienTu != null ? Model.donHangDienTu.Count() : 0) </span></td>
                                            <td style="--size: calc( @(Model.donHangVanPhongPham != null ? Model.donHangVanPhongPham.Count() : 0) / 50 ); --color: rgba(255 180 50 / 75%);"><span class="data"> @(Model.donHangVanPhongPham != null ? Model.donHangVanPhongPham.Count() : 0) </span></td>
                                            <td style="--size: calc( @(Model.donHangThoiTrang != null ? Model.donHangThoiTrang.Count() : 0) / 50 ); --color: rgba(255 220 90 / 75%);"><span class="data"> @(Model.donHangThoiTrang != null ? Model.donHangThoiTrang.Count() : 0) </span></td>
                                            <td style="--size: calc( @(Model.donHangGiaDung != null ? Model.donHangGiaDung.Count() : 0) / 50 ); --color: rgba(100 210 80 / 75%);"><span class="data"> @(Model.donHangGiaDung != null ? Model.donHangGiaDung.Count() : 0) </span></td>
                                            <td style="--size: calc( @(Model.donHangThucPham != null ? Model.donHangThucPham.Count() : 0) / 50 ); --color: rgba(90 165 255 / 75%);"><span class="data"> @(Model.donHangThucPham != null ? Model.donHangThucPham.Count() : 0) </span></td>
                                        </tr>

                                    </tbody>
                                </table>
                                <ul class="charts-css legend legend-inline legend-square">
                                    <li> Điện tử </li>
                                    <li> Văn phòng phẩm </li>
                                    <li> Thời trang </li>
                                    <li> Gia dụng </li>
                                    <li> Thực phẩm </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <span>Biểu đồ tổng đơn hàng đã giao</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart">Thu gọn</button>
                        </div>
                        <div class="card-body" style="color:black">
                            <div id="bar-example-12">
                                <table class="charts-css bar show-labels show-primary-axis show-data-axes">
                                    <tbody>

                                        <tr>
                                            <th scope="row">@((Model.donHangHT != null ? Model.donHangHT.Count() : 0))</th>
                                            <td style="--size: @(((Model.donHangHT != null ? Model.donHangHT.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row"> @((Model.donHangHL != null ? Model.donHangHL.Count() : 0)) </th>
                                            <td style="--size: @(((Model.donHangHL != null ? Model.donHangHL.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br/>
                                <ul class="charts-css legend legend-inline legend-square">
                                    <li> 2024 </li>
                                    <li> 2025 </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="col-md-4" id="chartSection2">
                    <div class="card">
                        <div class="card-header">
                            <span>Doanh thu 3 tháng gần đây</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="toggleBarChart2">Thu gọn</button>
                        </div>
                        <div class="card-body" style="color:black">
                            <div id="line-example-7" style="display: flex; align-items: center;">
                                <!-- Ghi chú đơn vị -->
                                <div style="text-align: right; margin-right: 10px; font-size: 12px; line-height: 2.5em;">
                                    <div>100Tr</div>
                                    <div>10Tr</div>
                                    <div>1Tr</div>
                                    <div>100K</div>
                                    <div style="margin-bottom:30px">0</div>
                                </div>

                                <!-- Biểu đồ -->
                                <table class="charts-css line multiple hide-data show-labels show-primary-axis show-4-secondary-axes">
                                    <thead>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th scope="row">@DateTime.Now.AddMonths(-3).Month</th>
                                            <td style="--start: 0; --end: 0.2;"><span class="data">@Model.doangThuTM</span></td>
                                        </tr>
                                        <tr>
                                            <th scope="row">@DateTime.Now.AddMonths(-2).Month</th>
                                            <td style="--start: 0.2; --end: 0.9;"><span class="data">@Model.doangThuTMM</span></td>
                                        </tr>
                                        <tr>
                                            <th scope="row">@DateTime.Now.AddMonths(-1).Month</th>
                                            <td style="--start: 0.9; --end: 1;"><span class="data">@Model.doangThuTMH</span></td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span>Biểu đồ phân loại vật tư</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart2">Thu gọn</button>
                        </div>
                        <div class="card-body" style="color:black">
                            <div id="column-example-10">
                                <table class="charts-css column show-labels show-primary-axis show-data-axes">

                                    <tbody>
                                        <tr>
                                            <th scope="row">@((Model.vatTuDT != null ? Model.vatTuDT.Count() : 0))</th>
                                            <td style="--size: @(((Model.vatTuDT != null ? Model.vatTuDT.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row"> @((Model.vatTuVPP != null ? Model.vatTuVPP.Count() : 0)) </th>
                                            <td style="--size: @(((Model.vatTuVPP != null ? Model.vatTuVPP.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                        </tr>
                                        <tr>
                                            <th scope="row"> @((Model.vatTuGH != null ? Model.vatTuGH.Count() : 0)) </th>
                                            <td style="--size: @(((Model.vatTuGH != null ? Model.vatTuGH.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                        </tr>
                                        <tr>
                                            <th scope="row"> @((Model.vatTuGD != null ? Model.vatTuGD.Count() : 0)) </th>
                                            <td style="--size: @(((Model.vatTuGD != null ? Model.vatTuGD.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                        </tr>
                                    </tbody>
                                </table>
                                <ul class="charts-css legend legend-inline legend-square">
                                    <li> Điện tử </li>
                                    <li> Văn phòng phẩm </li>
                                    <li> Giao hàng </li>
                                    <li> Gia dụng </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        }
        @if (Convert.ToInt32(Session["IdUser"]) == 2)
        {
           <div class="row">
               <section class="col-md-4" id="mapSection">
                   <div class="card">
                       <div class="card-header">
                           <span>Biểu đồ phân loại vật tư</span>
                           <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart2">Thu gọn</button>
                       </div>
                       <div class="card-body" style="color:black">
                           <div id="column-example-10">
                               <table class="charts-css column show-labels show-primary-axis show-data-axes">

                                   <tbody>
                                       <tr>
                                           <th scope="row">@((Model.vatTuDT != null ? Model.vatTuDT.Count() : 0))</th>
                                           <td style="--size: @(((Model.vatTuDT != null ? Model.vatTuDT.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>
                                       </tr>
                                       <tr>
                                           <th scope="row"> @((Model.vatTuVPP != null ? Model.vatTuVPP.Count() : 0)) </th>
                                           <td style="--size: @(((Model.vatTuVPP != null ? Model.vatTuVPP.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                       </tr>
                                       <tr>
                                           <th scope="row"> @((Model.vatTuGH != null ? Model.vatTuGH.Count() : 0)) </th>
                                           <td style="--size: @(((Model.vatTuGH != null ? Model.vatTuGH.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                       </tr>
                                       <tr>
                                           <th scope="row"> @((Model.vatTuGD != null ? Model.vatTuGD.Count() : 0)) </th>
                                           <td style="--size: @(((Model.vatTuGD != null ? Model.vatTuGD.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                       </tr>
                                   </tbody>
                               </table>
                               <ul class="charts-css legend legend-inline legend-square">
                                   <li> Điện tử </li>
                                   <li> Văn phòng phẩm </li>
                                   <li> Giao hàng </li>
                                   <li> Gia dụng </li>
                               </ul>
                           </div>
                       </div>
                   </div>
               </section>
               <section class="col-md-4" id="chartSection1">
                   <div class="card">
                       <div class="card-header">
                           <span>Biểu đồ phân loại trạng thái vật tư</span>
                           <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart">Thu gọn</button>
                       </div>
                       <div class="card-body" style="color:black">
                           <div id="datasets-example-1">
                               <table class="charts-css column show-labels data-spacing-5 datasets-spacing-1">
                                   <tbody>
                                       <tr>
                                           <td style="--size: calc( @(Model.vatTuMoi != null ? Model.vatTuMoi.Count() : 0) / 50 ); --color: rgba(240 50 50 / 75%);">
                                           <span class="data"> @(Model.vatTuMoi != null ? Model.vatTuMoi.Count() : 0) </span></td>
                                           <td style="--size: calc( @(Model.vatTuHuHongs != null ? Model.vatTuHuHongs.Count() : 0) / 50 ); --color: rgba(255 180 50 / 75%);">
                                           <span class="data"> @(Model.vatTuHuHongs != null ? Model.vatTuHuHongs.Count() : 0) </span></td>
                                           <td style="--size: calc( @(Model.vatTuDangSuaChuas != null ? Model.vatTuDangSuaChuas.Count() : 0) / 50 ); --color: rgba(255 220 90 / 75%);">
                                           <span class="data"> @(Model.vatTuDangSuaChuas != null ? Model.vatTuDangSuaChuas.Count() : 0) </span></td>
                                       </tr>

                                   </tbody>
                               </table>
                               <ul class="charts-css legend legend-inline legend-square">
                                   <li> Mới </li>
                                   <li> Hư hỏng </li>
                                   <li> Đang sửa chữa </li>
                               </ul>
                           </div>
                       </div>
                   </div>
               </section>
               <section class="col-md-4" id="chartSection2">
                   <div class="card">
                       <div class="card-header">
                           <span>Biểu đồ phân loại nhân viên</span>
                           <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart2">Thu gọn</button>
                       </div>
                       <div class="card-body" style="color:black">
                           <div id="column-example-10">
                               <table class="charts-css column show-labels show-primary-axis show-data-axes">

                                   <tbody>
                                       <tr>
                                           <th scope="row"> @(Model.nhanVienVanPhong != null ? Model.nhanVienVanPhong.Count() : 0) </th>
                                           <td style="--size: @(((Model.nhanVienVanPhong != null ? Model.nhanVienVanPhong.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>
                                       </tr>
                                       <tr>
                                           <th scope="row"> @(Model.nhanVienGiaoHang != null ? Model.nhanVienGiaoHang.Count() : 0) </th>
                                           <td style="--size: @(((Model.nhanVienGiaoHang != null ? Model.nhanVienGiaoHang.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                       </tr>
                                   </tbody>
                               </table>
                               <ul class="charts-css legend legend-inline legend-square">
                                   <li> Văn phòng </li>
                                   <li> Giao hàng </li>
                               </ul>
                           </div>
                       </div>
                   </div>
               </section>
           </div>
        }
        @if (Convert.ToInt32(Session["IdUser"]) == 3)
        {
            <div class="row">
                <section class="col-md-4" id="mapSection">
                    <div class="card">
                        <div class="card-header">
                            <span>Khu vực</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="toggleMap">Thu gọn</button>
                        </div>
                        <div class="card-body" id="mapContainer">
                            <div id="map" style="height: 400px; width: 100%;"></div>
                        </div>
                    </div>
                </section>
                <section class="col-md-4" id="chartSection1">
                    <div class="card">
                        <div class="card-header">
                            <span>Biểu đồ phân loại đơn hàng</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart">Thu gọn</button>
                        </div>
                        <div class="card-body" style="color:black">
                            <div id="datasets-example-1">
                                <table class="charts-css column show-labels data-spacing-5 datasets-spacing-1">
                                    <tbody>
                                        <tr>
                                            <td style="--size: calc( @(Model.donHangDienTu != null ? Model.donHangDienTu.Count() : 0) / 50 ); --color: rgba(240 50 50 / 75%);"><span class="data"> @(Model.donHangDienTu != null ? Model.donHangDienTu.Count() : 0) </span></td>
                                            <td style="--size: calc( @(Model.donHangVanPhongPham != null ? Model.donHangVanPhongPham.Count() : 0) / 50 ); --color: rgba(255 180 50 / 75%);"><span class="data"> @(Model.donHangVanPhongPham != null ? Model.donHangVanPhongPham.Count() : 0) </span></td>
                                            <td style="--size: calc( @(Model.donHangThoiTrang != null ? Model.donHangThoiTrang.Count() : 0) / 50 ); --color: rgba(255 220 90 / 75%);"><span class="data"> @(Model.donHangThoiTrang != null ? Model.donHangThoiTrang.Count() : 0) </span></td>
                                            <td style="--size: calc( @(Model.donHangGiaDung != null ? Model.donHangGiaDung.Count() : 0) / 50 ); --color: rgba(100 210 80 / 75%);"><span class="data"> @(Model.donHangGiaDung != null ? Model.donHangGiaDung.Count() : 0) </span></td>
                                            <td style="--size: calc( @(Model.donHangThucPham != null ? Model.donHangThucPham.Count() : 0) / 50 ); --color: rgba(90 165 255 / 75%);"><span class="data"> @(Model.donHangThucPham != null ? Model.donHangThucPham.Count() : 0) </span></td>
                                        </tr>

                                    </tbody>
                                </table>
                                <ul class="charts-css legend legend-inline legend-square">
                                    <li> Điện tử </li>
                                    <li> Văn phòng phẩm </li>
                                    <li> Thời trang </li>
                                    <li> Gia dụng </li>
                                    <li> Thực phẩm </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <span>Biểu đồ tổng đơn hàng đã giao</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart3">Thu gọn</button>
                        </div>
                        <div class="card-body" style="color:black">
                            <div id="bar-example-12">
                                <table class="charts-css bar show-labels show-primary-axis show-data-axes">
                                    <tbody>

                                        <tr>
                                            <th scope="row"> @(Model.donHangHT != null ? Model.donHangHT.Count() : 0) </th>
                                            <td style="--size: @(((Model.donHangHT != null ? Model.donHangHT.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row"> @(Model.donHangHL != null ? Model.donHangHL.Count() : 0) </th>
                                            <td style="--size: @(((Model.donHangHL != null ? Model.donHangHL.Count() : 0) / 20.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br />
                                <ul class="charts-css legend legend-inline legend-square">
                                    <li> 2024 </li>
                                    <li> 2025 </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="col-md-4" id="chartSection2">
                    <div class="card">
                        <div class="card-header">
                            <span>Biểu đồ phân loại trạng thái đơn hàng</span>
                            <button class="btn btn-sm btn-outline-secondary float-end" id="togglePieChart2">Thu gọn</button>
                        </div>
                        <div class="card-body" style="color:black">
                            <div id="column-example-10">
                                <table class="charts-css column show-labels show-primary-axis show-data-axes">

                                    <tbody>
                                        <tr>
                                            <th scope="row"> @(Model.donHangLuuKhos != null ? Model.donHangLuuKhos.Count() : 0) </th>
                                            <td style="--size: @(((Model.donHangLuuKhos != null ? Model.donHangLuuKhos.Count() : 0) / 40.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row"> @(Model.donHangDaGiaos != null ? Model.donHangDaGiaos.Count() : 0) </th>
                                            <td style="--size: @(((Model.donHangDaGiaos != null ? Model.donHangDaGiaos.Count() : 0) / 40.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                        </tr>
                                        <tr>
                                            <th scope="row">  @(Model.donHangDangGiaos != null ? Model.donHangDangGiaos.Count() : 0) </th>
                                            <td style="--size: @(((Model.donHangDangGiaos != null ? Model.donHangDangGiaos.Count() : 0) / 40.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                        </tr>
                                        <tr>
                                            <th scope="row"> @(Model.donHangSuCos != null ? Model.donHangSuCos.Count() : 0) </th>
                                            <td style="--size: @(((Model.donHangSuCos != null ? Model.donHangSuCos.Count() : 0) / 40.0).ToString("0.##", System.Globalization.CultureInfo.InvariantCulture));"></td>

                                        </tr>
                                    </tbody>
                                </table>
                                <ul class="charts-css legend legend-inline legend-square">
                                    <li> Lưu kho </li>
                                    <li> Đã giao </li>
                                    <li> Đang giao </li>
                                    <li> Sự cố </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        }
    </div>

    <script>
        $(document).ready(function () {
            $("#toggleMap").click(function () {
                var $mapContainer = $("#mapContainer");
                if ($mapContainer.is(":visible")) {
                    $mapContainer.slideUp();
                    $(this).text("Mở rộng");
                } else {
                    $mapContainer.slideDown();
                    $(this).text("Thu gọn");
                }
            });
            $("#togglePieChart").click(function () {
                var $pieChartContainer = $("#datasets-example-1");
                if ($pieChartContainer.is(":visible")) {
                    $pieChartContainer.slideUp();
                    $(this).text("Mở rộng");
                } else {
                    $pieChartContainer.slideDown();
                    $(this).text("Thu gọn");
                }
            });
            $("#toggleBarChart2").click(function () {
                var $barChart2Container = $("#line-example-7");
                if ($barChart2Container.is(":visible")) {
                    $barChart2Container.slideUp();
                    $(this).text("Mở rộng");
                } else {
                    $barChart2Container.slideDown();
                    $(this).text("Thu gọn");
                }
            });
            $("#togglePieChart2").click(function () {
                var $pieChartContainer = $("#column-example-10");
                if ($pieChartContainer.is(":visible")) {
                    $pieChartContainer.slideUp();
                    $(this).text("Mở rộng");
                } else {
                    $pieChartContainer.slideDown();
                    $(this).text("Thu gọn");
                }
            });
            $("#togglePieChart3").click(function () {
                var $pieChartContainer = $("#bar-example-12");
                if ($pieChartContainer.is(":visible")) {
                    $pieChartContainer.slideUp();
                    $(this).text("Mở rộng");
                } else {
                    $pieChartContainer.slideDown();
                    $(this).text("Thu gọn");
                }
            });
        });
    </script>
    @if (Convert.ToInt32(Session["IdUser"]) == 1 || Convert.ToInt32(Session["IdUser"]) == 3)
    {
        <script>
            var khuVucList = @Html.Raw(JsonConvert.SerializeObject(Model.khuVucs.Select(item => new { item.ToaDo, item.Ten })));
            var map = L.map('map').setView([10.845, 106.75], 12);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            khuVucList.forEach(function(item) {
                var toaDo = JSON.parse(item.ToaDo);
                var polygon = L.polygon(toaDo).addTo(map);
                polygon.bindPopup('<b>' + item.Ten + '</b>');
            });


        </script>
    }


</body>
</html>
